{% extends "polls/base.html" %}

{% block title %}Ergebnisse â€’ ZaPF Abstimmungstool{% endblock %}

{% block shorttitle %}Ergebnisse{% endblock %}

{% block content %}
<div class="alert alert-info">{{ message }}</div>

<h2>Laufende Abstimmungen</h2>
{% if current_questions %}
    {% for question in current_questions %}
    <div class="card mb-3">
        <div class="card-body">
            <h3 class="card-title">{{ question.question_title }}</h3>
            <p class="card-text">{{ question.question_text }}</p>
        </div>
        {% if question.choices %}
            <ul class="list-group list-group-flush">
                {% for choice in question.choices.all %}
                <li class="list-group-item"><span class="badge bg-primary rounded-pill">{{ choice.votes.all | length }}</span> {{ choice.choice_text }}
                    {% if choice.votes %}
                        <ul class="votes">
                            {% for vote in choice.votes.all %}
                                <li>{{ vote.uni }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
    {% endfor %}
{% else %}
    <p>Es sind aktuell keine Abstimmungen offen.</p>
{% endif %}

<h2>Abgeschlossene Abstimmungen</h2>
{% if questions %}
    {% for question in questions %}
    <div class="card mb-3">
        <div class="card-body">
            <h3 class="card-title">{{ question.question_title }}</h3>
            <p class="card-text">{{ question.question_text }}</p>
        </div>
        {% if question.choices %}
            <ul class="list-group list-group-flush">
                {% for choice in question.choices.all %}
                <li class="list-group-item"><span class="badge bg-primary rounded-pill">{{ choice.votes.all | length }}</span> {{ choice.choice_text }}
                    {% if choice.votes %}
                        <ul class="votes">
                            {% for vote in choice.votes.all %}
                                <li>{{ vote.uni }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
    {% endfor %}
{% else %}
    <p>Es sind noch keine Abstimmungen abgeschlossen worden.</p>
{% endif %}
{% endblock %}
